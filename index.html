<!DOCTYPE html><html lang="fr">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Mini Secr√©tariat Complet - LesFacilitateurs</title>
<link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet"/>
<style>
:root{--bg1:#ffefd5;--bg2:#ffe4f0;--accent:#ff6b6b;}
*{box-sizing:border-box;margin:0;padding:0;}
body{font-family:Inter,sans-serif;background:linear-gradient(120deg,var(--bg1),var(--bg2));color:#222;display:flex;justify-content:center;}
.container{width:360px;padding:12px;}
.header{display:flex;align-items:center;justify-content:space-between;padding:12px;background:rgba(255,255,255,0.8);border-radius:12px;}
.brand{display:flex;align-items:center;gap:8px;}
.brand .logo{width:40px;height:40px;border-radius:10px;background:linear-gradient(45deg,#ff9a9e,#fad0c4);display:flex;align-items:center;justify-content:center;font-size:20px;}
.brand h1{font-family:'Dancing Script',cursive;font-size:16px;color:var(--accent);}
.navbar{display:flex;overflow-x:auto;padding:8px 0;gap:6px;}
.navbar button{flex-shrink:0;padding:8px 12px;border-radius:20px;border:none;background:linear-gradient(90deg,#fff,rgba(255,255,255,0.6));cursor:pointer;}
.main{background:rgba(255,255,255,0.85);border-radius:12px;padding:10px;margin-top:12px;min-height:500px;}
.doc-title{font-family:'Dancing Script',cursive;font-size:18px;margin-bottom:6px;}
.field{margin-bottom:8px;}
.field label{display:block;font-size:12px;color:#555;margin-bottom:4px;font-weight:600;}
textarea{width:100%;min-height:60px;resize:none;padding:6px;border-radius:6px;border:1px solid #eee;font-size:12px;}
.doc-photo{width:80px;height:80px;object-fit:cover;border-radius:8px;border:2px solid white;box-shadow:0 4px 12px rgba(0,0,0,0.08);cursor:pointer;float:left;margin-right:8px;margin-bottom:8px;}
.signature-area{width:100%;height:60px;border:2px dashed #000;border-radius:8px;margin-bottom:6px;}
.btn{padding:6px 10px;border-radius:8px;border:0;cursor:pointer;margin-top:4px;font-size:12px;}
.btn-primary{background:linear-gradient(90deg,#4facfe,#00f2fe);color:white;}
.btn-ghost{background:transparent;border:1px solid #ddd;margin-left:6px;}
#paymentModal{position:fixed;inset:0;background:rgba(0,0,0,0.45);display:none;align-items:center;justify-content:center;padding:12px;z-index:1000;}
#paymentModal > div{background:white;border-radius:12px;padding:12px;width:320px;}
#pmMsg{margin-top:6px;color:crimson;}
</style>
</head>
<body>
<div class="container">
  <header class="header">
    <div class="brand"><div class="logo">LF</div><h1>Mini Secr√©tariat</h1></div>
  </header>
  <nav class="navbar" id="mainNav"></nav>
  <main class="main" id="app">
    <p>Bienvenue dans le Mini Secr√©tariat. Choisissez un document ‚ú®</p>
  </main>
  <div id="paymentModal">
    <div>
      <h3>Paiement requis avant t√©l√©chargement</h3>
      <div style="display:flex; flex-direction:column; gap:6px;">
        <h4>Mobile Money / OM</h4>
        <input id="mmBen1" type="text" value="loveline wirnkar momo: 676353859" readonly style="font-weight:600;font-size:14px;"/>
        <input id="mmBen2" type="text" value="OM 640647072" readonly style="margin-top:4px;font-weight:600;font-size:14px;"/>
        <label>Message de transaction</label>
        <input id="mmMsg" type="text" placeholder="Ex: Vous avez recu ..." style="font-size:13px;"/>
      </div>
      <div style="margin-top:8px">
        <h4>Acc√®s VIP</h4>
        <input id="vipInput" type="text" placeholder="Entrez votre code VIP" style="font-size:13px;"/>
      </div>
      <button class="btn btn-primary" style="width:100%;margin-top:8px" onclick="validatePayment()">Valider paiement / VIP</button>
      <button class="btn btn-ghost" onclick="closePaymentModal()">Annuler</button>
      <p id="pmMsg"></p>
    </div>
  </div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script>
const documents=['CV','LettreMotivation','CarteVisite','Plan','Fiche','Protocole','Contrat','Facture','Devis','Photocopie','CNI','Passeport'];
const nav=document.getElementById('mainNav');
let pendingDoc=null, VIP_CODE='233233';
documents.forEach(doc=>{
  const btn=document.createElement('button');
  btn.textContent=doc.replace(/([A-Z])/g,' $1').trim();
  btn.onclick=()=>openDoc(doc);
  nav.appendChild(btn);
});
function openDoc(doc){
  pendingDoc=doc;
  const app=document.getElementById('app');
  app.innerHTML=`<h2 class="doc-title">${doc.replace(/([A-Z])/g,' $1').trim()}</h2>`+generateDocHTML(doc);
  initSignatures();
}
function generateDocHTML(doc){
  const sigId='sig'+doc;
  const sigCanvas=`<canvas id="${sigId}" class="signature-area"></canvas>
                   <button class="btn btn-ghost" onclick="clearCanvas('${sigId}')">üóë Effacer signature</button>`;
  const photoHTML=(id,title)=>`<input type="file" id="${id}" accept="image/*" style="display:none" onchange="displayPhoto('${id}','img${id}')"/>
<label for="${id}"><img id="img${id}" class="doc-photo" title="${title}"/></label>`;
  let content='';
  if(doc==='Photocopie' || doc==='CNI'){
    content=`<div style="display:flex; gap:8px; margin-bottom:8px;">${photoHTML(doc+'1','Recto')}<textarea>Texte Recto...</textarea></div>
             <div style="display:flex; gap:8px;">${photoHTML(doc+'2','Verso')}<textarea>Texte Verso...</textarea></div>`;
  } else {
    content=`<div style="display:flex; gap:8px;">${photoHTML(doc+'Photo','Photo '+doc)}<textarea>Votre texte ici...</textarea></div>`;
  }
  return `<div style="display:flex; flex-direction:column; gap:8px;">${content}${sigCanvas}<button class="btn btn-primary" onclick="requestPayment()">T√©l√©charger PDF</button></div>`;
}
function addGalleryPhoto(){/* similaire si besoin */}
function displayPhoto(inputId,imgId){const input=document.getElementById(inputId);const img=document.getElementById(imgId);if(input.files && input.files[0]){const reader=new FileReader();reader.onload=e=>{img.src=e.target.result;};reader.readAsDataURL(input.files[0]);}}
function initSignatures(){document.querySelectorAll('canvas.signature-area').forEach(c=>{const ctx=c.getContext('2d');ctx.strokeStyle='#000';ctx.lineWidth=2;let drawing=false;function getPos(e){const rect=c.getBoundingClientRect();if(e.touches && e.touches[0]) return {x:e.touches[0].clientX-rect.left,y:e.touches[0].clientY-rect.top};return {x:e.offsetX ?? e.clientX-rect.left,y:e.offsetY ?? e.clientY-rect.top};}function startDraw(e){e.preventDefault();drawing=true;const pos=getPos(e);ctx.beginPath();ctx.moveTo(pos.x,pos.y);}function draw(e){if(!drawing) return;e.preventDefault();const pos=getPos(e);ctx.lineTo(pos.x,pos.y);ctx.stroke();}function stopDraw(e){if(!drawing) return;e.preventDefault();drawing=false;}c.addEventListener('mousedown',startDraw);c.addEventListener('mousemove',draw);c.addEventListener('mouseup',stopDraw);c.addEventListener('mouseleave',stopDraw);c.addEventListener('touchstart',startDraw);c.addEventListener('touchmove',draw);c.addEventListener('touchend',stopDraw);});}
function clearCanvas(id){const c=document.getElementById(id);if(c)c.getContext('2d').clearRect(0,0,c.width,c.height);}
function requestPayment(){document.getElementById('paymentModal').style.display='flex';}
function closePaymentModal(){document.getElementById('paymentModal').style.display='none';}
function validatePayment(){const msg=document.getElementById('mmMsg').value.trim();const vip=document.getElementById('vipInput').value.trim();let valid=false;if(vip===VIP_CODE) valid=true;if(msg) valid=true;if(valid){document.getElementById('pmMsg').innerText='Paiement / VIP valid√© !'; closePaymentModal(); downloadPDF();}else{document.getElementById('pmMsg').innerText='Paiement non valid√©.';}}
async function downloadPDF(){if(!pendingDoc) return;const app=document.getElementById('app');const canvas=await html2canvas(app,{scale:2});const imgData=canvas.toDataURL('image/png');const { jsPDF }=window.jspdf;const pdf=new jsPDF({orientation:'portrait',unit:'mm',format:'a5'});pdf.addImage(imgData,'PNG',0,0,148,210);pdf.save(pendingDoc+'.pdf');}
</script>
</body>
</html>