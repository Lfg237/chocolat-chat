<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CV / Lettre / Plan</title>
<style>
body{font-family:Arial,sans-serif;background:#e0f7fa;margin:0;padding:10px}
section{padding:15px;border-radius:10px;margin-bottom:15px;box-shadow:0 2px 5px rgba(0,0,0,0.1)}
#cv{background:#fff9c4} /* Jaune clair */
#lettre{background:#c8e6c9} /* Vert clair */
#plan{background:#bbdefb} /* Bleu clair */
input,textarea,button{width:100%;padding:8px;margin:6px 0;border:1px solid #1e90ff;border-radius:6px}
button{cursor:pointer}
button.primary{background:#25D366;color:#fff;font-weight:700;border:none;font-size:1rem}

/* Popup paiement */
#popupOverlay{display:none;position:fixed;inset:0;background:rgba(0,0,0,0.6);justify-content:center;align-items:center}
#popup{background:#fff;padding:15px;border-radius:10px;width:100%;max-width:400px}
.result{margin:5px 0;font-weight:bold}
</style>
</head>
<body>

<h1>üìÑ CV / Lettre de Motivation / Plan</h1>

<section id="cv">
<h2>üë§ CV</h2>
<input id="fullName" placeholder="Nom complet">
<input id="profession" placeholder="Profession / poste">
<input id="prenom" placeholder="Pr√©nom">
<input id="age" placeholder="√Çge">
<input id="ville" placeholder="Ville">
<input id="quartier" placeholder="Quartier">
<input id="situation" placeholder="Situation matrimoniale">
<input id="enfants" placeholder="Nombre d'enfants">
<input id="poste" placeholder="Dernier poste">
<input id="loisirs" placeholder="Loisirs">
<input id="caractere" placeholder="Caract√®re">
<input id="diplome" placeholder="Dernier dipl√¥me">
<input id="etablissement" placeholder="√âtablissement">
<input id="alcool" placeholder="Alcoolique Oui/Non">
<input id="salaire" placeholder="Salaire">
<input id="email" placeholder="Email">
<input id="telMtn" placeholder="Tel MTN">
<input id="telOrange" placeholder="Tel Orange">
</section>

<section id="lettre">
<h2>‚úâÔ∏è Lettre de motivation</h2>
<input id="prenomLetter" placeholder="Pr√©nom">
<input id="nomLetter" placeholder="Nom">
<input id="entreprise" placeholder="Entreprise">
<input id="posteLetter" placeholder="Poste souhait√©">
<textarea id="contenu" placeholder="Contenu"></textarea>
</section>

<section id="plan">
<h2>üó∫Ô∏è Plan de localisation</h2>
<textarea id="planText" placeholder="Plan de localisation"></textarea>
</section>

<button id="shareBtn" class="primary">üì§ Partager sur WhatsApp</button>
<button id="downloadPdf" class="primary">üì• T√©l√©charger PDF</button>

<!-- Popup paiement -->
<div id="popupOverlay">
<div id="popup">
<h2>Paiement requis</h2>
<p>B√©n√©ficiaire: Wirnkar Loveline</p>
<p>MTN MoMo: 676353859<br>OM: 640647072<br>Montant: 25 FCFA</p>
<textarea class="momoMsg" placeholder="Message Mobile Money"></textarea>
<input class="adminCode" type="password" placeholder="Code admin">
<div class="result"></div>
<button class="validateAdminBtn primary">‚úÖ Valider code admin</button>
<button class="verifyBtn primary">‚úÖ V√©rifier & Partager</button>
<button onclick="document.getElementById('popupOverlay').style.display='none'">Annuler</button>
</div>
</div>

<!-- html2pdf.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

<script>
const EXPECTED={phones:['676353859','640647072'],amount:25,admin:'233233',maxDelay:5};
let isAdmin=false;

const shareBtn=document.getElementById('shareBtn');
const downloadBtn=document.getElementById('downloadPdf');

function buildDocumentHTML() {
  return `
<section style="background:#fff9c4;padding:10px;border-radius:8px;margin-bottom:10px;">
<h2>CV</h2>
<p>Nom: ${document.getElementById('fullName').value}</p>
<p>Profession: ${document.getElementById('profession').value}</p>
<p>Pr√©nom: ${document.getElementById('prenom').value}</p>
<p>√Çge: ${document.getElementById('age').value}</p>
<p>Ville: ${document.getElementById('ville').value}</p>
<p>Quartier: ${document.getElementById('quartier').value}</p>
<p>Situation: ${document.getElementById('situation').value}</p>
<p>Enfants: ${document.getElementById('enfants').value}</p>
<p>Dernier poste: ${document.getElementById('poste').value}</p>
<p>Loisirs: ${document.getElementById('loisirs').value}</p>
<p>Caract√®re: ${document.getElementById('caractere').value}</p>
<p>Dipl√¥me: ${document.getElementById('diplome').value}</p>
<p>√âtablissement: ${document.getElementById('etablissement').value}</p>
<p>Alcoolique: ${document.getElementById('alcool').value}</p>
<p>Salaire: ${document.getElementById('salaire').value}</p>
<p>Email: ${document.getElementById('email').value}</p>
<p>Tel MTN: ${document.getElementById('telMtn').value}</p>
<p>Tel Orange: ${document.getElementById('telOrange').value}</p>
</section>
<section style="background:#c8e6c9;padding:10px;border-radius:8px;margin-bottom:10px;">
<h2>Lettre de motivation</h2>
<p>Pr√©nom: ${document.getElementById('prenomLetter').value}</p>
<p>Nom: ${document.getElementById('nomLetter').value}</p>
<p>Entreprise: ${document.getElementById('entreprise').value}</p>
<p>Poste: ${document.getElementById('posteLetter').value}</p>
<p>Contenu: ${document.getElementById('contenu').value}</p>
</section>
<section style="background:#bbdefb;padding:10px;border-radius:8px;margin-bottom:10px;">
<h2>Plan de localisation</h2>
<p>${document.getElementById('planText').value}</p>
</section>`;
}

function buildDocumentText() {
  return `üìÑ CV de ${document.getElementById('fullName').value} (${document.getElementById('profession').value})

üü®‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ CV ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄüü®
Pr√©nom: ${document.getElementById('prenom').value}
√Çge: ${document.getElementById('age').value}
Ville: ${document.getElementById('ville').value}
Quartier: ${document.getElementById('quartier').value}
Situation: ${document.getElementById('situation').value}
Enfants: ${document.getElementById('enfants').value}
Dernier poste: ${document.getElementById('poste').value}
Loisirs: ${document.getElementById('loisirs').value}
Caract√®re: ${document.getElementById('caractere').value}
Dipl√¥me: ${document.getElementById('diplome').value}
√âtablissement: ${document.getElementById('etablissement').value}
Alcoolique: ${document.getElementById('alcool').value}
Salaire: ${document.getElementById('salaire').value}
Email: ${document.getElementById('email').value}
Tel MTN: ${document.getElementById('telMtn').value}
Tel Orange: ${document.getElementById('telOrange').value}

üü©‚îÄ‚îÄ‚îÄ‚îÄ Lettre de motivation ‚îÄ‚îÄ‚îÄ‚îÄüü©
Pr√©nom: ${document.getElementById('prenomLetter').value}
Nom: ${document.getElementById('nomLetter').value}
Entreprise: ${document.getElementById('entreprise').value}
Poste: ${document.getElementById('posteLetter').value}
Contenu: ${document.getElementById('contenu').value}

üü¶‚îÄ‚îÄ‚îÄ‚îÄ Plan de localisation ‚îÄ‚îÄ‚îÄ‚îÄüü¶
${document.getElementById('planText').value}`;
}

// Partage WhatsApp
shareBtn.onclick = () => {
  if(isAdmin){
    const data = buildDocumentText();
    window.open(`https://wa.me/?text=${encodeURIComponent(data)}`,'_blank');
  } else {
    document.getElementById('popupOverlay').style.display='flex';
    document.querySelector('#popup .result').innerHTML='';
  }
};

// T√©l√©charger PDF
downloadBtn.onclick = () => {
  const tempDiv =